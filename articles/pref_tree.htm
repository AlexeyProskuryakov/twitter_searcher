<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ru">
	<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#">
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<title>Префиксные деревья в Python / Хабрахабр</title>
		<meta name="description" content="Доделал на днях питонью библиотеку datrie, реализующую префиксное дерево (см. википедию или хабр), спешу поделиться. 

Если вкратце, то можно считать, что datrie.Trie — это замена стандартному..." />		
		<meta name="keywords" content="trie, python, python3, структуры данных, cython" />
		
		
	<meta property="fb:app_id"      content="437464306275519" /> 
<meta property="og:type"        content="article" /> 
<meta property="og:url"         content="http://habrahabr.ru/post/147963/" /> 
<meta property="og:title"       content="Префиксные деревья в Python" /> 

	
	<meta property="og:image"       content="http://habrahabr.ru/i/habralogo.jpg" />

<meta property="og:description" content="Доделал на днях питонью библиотеку datrie, реализующую префиксное дерево (см. википедию или хабр), спешу поделиться.   Если вкратце, то можно считать, что..." /> 


		
		
			<link href="/styles/1343992692/all.css" rel="stylesheet" media="all" />
		

		<link rel="stylesheet" href="/styles/fontello/css/habr.css?r=1343992692">
		<!--[if IE 7]><link rel="stylesheet" href="/styles/fontello/css/habr-ie7.css?r=1343992692"><![endif]-->
    
		
  <link href="/styles/1343992692/_parts/posts.css" rel="stylesheet" media="all" />
  <link href="/styles/1343992692/_parts/comments.css" rel="stylesheet" media="all" />
  <link href="/styles/1343992692/forms.css" rel="stylesheet" media="all" />
  <link href="/styles/1343992692/highlight.css" rel="stylesheet" media="all" />
  <link href="/styles/1343992692/posts/all.css" rel="stylesheet" media="all" />
  


	

		
		
			<script type="text/javascript" src="/javascripts/1343992692/all.js"></script>
		
		
		
			<link href="/styles/1343992692/facebook_reader.css" rel="stylesheet" type="text/css" />
			<script src="/javascripts/1343992692/facebook_reader.js" type="text/javascript"></script>
		
		
		

	
	
	
	
		
  <script type="text/javascript" src="/javascripts/1343992692/libs/jquery.form.js"></script>
  <script type="text/javascript" src="/javascripts/1343992692/libs/jquery.cookie.js"></script>
  <script type="text/javascript" src="/javascripts/1343992692/libs/wysiwyg.js"></script>
  <script type="text/javascript" src="/javascripts/1343992692/libs/highlight.js"></script>
  <script type="text/javascript" src="/javascripts/1343992692/_parts/posts.js"></script>
  <script type="text/javascript" src="/javascripts/1343992692/_parts/comments.js"></script>
  <script type="text/javascript" src="/javascripts/1343992692/posts/all.js"></script>

		
		<script type="text/javascript" src="/js/1343992692/adriver.core.2.js"></script>
		
		
		
		<link title="Хабрахабр / Комментарии к публикации «Префиксные деревья в Python»" type="application/rss+xml" rel="alternate" href="http://habrahabr.ru/rss/post/147963/"/>
		
	</head>

	<body>
	  






	<div id="topline"></div>
	<script type="text/javascript">
	(function(){
		var custom = {};
		
			custom[1]	= 'python';
		
		new adriver("topline", {sid:176776, bt:52, bn:1, custom: custom});
	})();
	</script>




		<div id="layout">	    
		  <div id="header">
  <div class="userpanel silver">
    
    
      <a href="http://habrahabr.ru/login/" class="login">войти</a> <a href="http://habrahabr.ru/register/">зарегистрироваться</a>
    
  </div>
  <a class="logo" href="http://habrahabr.ru/" title="На главную страницу"></a>
  <div class="search">
    <form id="search_form" name="search" method="get" action="/search/" >
      <input type="submit" value="" />
      <input type="text" name="q" x-webkit-speech speech  >
    </form>
  </div>


	<div class="main_menu">
		<a href="http://habrahabr.ru/posts/top/" class="active">посты</a><a href="http://habrahabr.ru/qa/">q&amp;a</a><a href="http://habrahabr.ru/events/coming/">события</a><a href="http://habrahabr.ru/hubs/">хабы</a><a href="http://habrahabr.ru/companies/">компании</a>
		<div class="banner_special">

	 

	 

	
	
		<!--  AdRiver code START. Type:135x35 Site: habrahabr PZ: 0 BN: 0 -->
		<script language="javascript" type="text/javascript"><!--
		var RndNum4NoCash = Math.round(Math.random() * 1000000000);
		var ar_Tail='unknown'; if (document.referrer) ar_Tail = escape(document.referrer);
		document.write(
		'<iframe src="http://ad.adriver.ru/cgi-bin/erle.cgi?'
		+ 'sid=176776&target=top&w=135&h=35&bt=25&pz=0&rnd=' + RndNum4NoCash + '&tail256=' + ar_Tail
		+ '" frameborder=0 vspace=0 hspace=0 width=135 height=35 marginwidth=0'
		+ ' marginheight=0 scrolling=no></iframe>');
		//--></script>
		<noscript>
		<a href="http://ad.adriver.ru/cgi-bin/click.cgi?sid=176776&bt=25&pz=0&rnd=795668059" target=_top>
		<img src="http://ad.adriver.ru/cgi-bin/rle.cgi?sid=176776&bt=25&pz=0&rnd=795668059" alt="-AdRiver-" border=0 width=135 height=35></a>
		</noscript>

		<!--  AdRiver code END  -->
	
	

</div>
		
	</div>


</div>


	
		  
	  
		  


	
  <div class="content_left">

	









	

		
  <div class="post shortcuts_item" id="post_147963">
    <h1 class="title">
      
	    

	      
      
        <span class="post_title">Префиксные деревья в Python</span>
      
      
      
			
      
  	</h1>
  	
  	
<div class="hubs">
	
		<a href="http://habrahabr.ru/hub/python/" class="hub " title="Вы не подписаны на этот хаб" >Python</a><span class="profiled_hub" title="Профильный хаб">*</span>
	
</div>

  	
  	<div class="content html_format">
  	Доделал на днях питонью библиотеку <a href="https://github.com/kmike/datrie">datrie</a>, реализующую префиксное дерево (см. <a href="http://en.wikipedia.org/wiki/Trie">википедию</a> или <a href="http://habrahabr.ru/post/111874/">хабр</a>), спешу поделиться. <br/>
<br/>
Если вкратце, то можно считать, что datrie.Trie — это замена стандартному питоньему dict, которая при определенных условиях (ключи — строки) занимает меньше памяти, имеет сравнимую скорость получения отдельного элемента и поддерживает дополнительные операции (получение всех префиксов данной строки, получение всех строк, начинающихся с данной строки и др.), которые работают примерно так же быстро, как и «словарные» операции. <br/>
<br/>
Работает под Python 2.6-3.3, поддерживает юникод, лицензия LGPL.<br/>
<br/>
<a name="habracut"></a><br/>
<br/>
<a href="https://github.com/kmike/datrie">datrie</a> — это Cython-обертка над библиотекой <a href="http://linux.thai.net/~thep/datrie/datrie.html">libdatrie</a>. В libdatrie реализован вариант префиксного дерева, в котором конечный автомат переходов между узлами хранится в специальных 2 массивах + реализовано сжатие суффиксов (ветки, которые не ветвятся, хранятся еще в одном отдельном массиве «хвостов»). Это не совсем «state of art» вариант trie (HAT-trie и тд вроде должны быть быстрее), но вариант достаточно быстрый/эффективный и с хорошей готовой реализацией (а реализация может на практике убить любой алгоритм).<br/>
<br/>
Существующие варианты trie-образных структур для питона меня не устраивали. Чисто питоньи реализации неизбежно будут потреблять очень много памяти, они отметаются сразу. Другие реализации trie-образных структур для питона:<br/>
<br/>
<ul>
<li>trie.c в biopython. Не поддерживает юникод (хотя это ОК), не работает под 3.х (и чтоб заставить работать под 3.х, нужно хорошенько переписывать обертку, т.к. библиотека реализована как «голое» C-расширение);</li>
<li><a href="https://github.com/buriy/python-chartrie">github.com/buriy/python-chartrie</a> от <a href="http://habrahabr.ru/users/buriy/" class="user_link">buriy</a> — довольно быстрая (на __getitem__ быстрее, чем datrie в итоге), занимает много памяти (чтоб это поправить, нужно, видимо, структуру данных менять, т.е. основу библиотеки), мало функционала, не поддерживает юникод (хотя это ОК);</li>
<li><a href="http://www.dalkescientific.com/Python/PyJudy.html">www.dalkescientific.com/Python/PyJudy.html</a> — старая, сложная, непонятно, работает ли (написано, что поддерживает 2.3 и 2.4)</li>
</ul><br/>
<br/>
Может еще что-то и есть, но, в любом случае, варианта «поставил — заработало — всем устраивает!» не нашел, поэтому считаю, что желание вспомнить C и поразбираться получше в Cython и Python C-API вполне успешно удалось прикрыть отсутствием нормальной реализации trie для питона.<br/>
<br/>
Установка (как это обычно бывает при установке расширений, потребуется компилятор): <br/>
<br/>
<code>pip install datrie</code><br/>
<br/>
Создание:<br/>
<br/>
<pre><code class="python">import string
import datrie
trie = datrie.new(string.ascii_lowercase)
</code></pre><br/>
<br/>
При создании нужно сразу сказать, какие ключи можно будет с этим trie использовать (явно указывать алфавит или диапазоны). Это ограничение libdatrie, которое позволяет эффективно хранить автомат состояний и поддерживать юникод — сначала указываются допустимые диапазоны unicode-символов, потом unicode-ключи транслируются в более компактное внутреннее представление. <br/>
<br/>
<i>Мне кажется, что можно было бы на практике обойтись однобайтовыми кодировками вроде cp1251 и иметь примерно тот же функционал и эффективность, но подход с диапазонами символов тоже работает неплохо, уж сделано так в libdatrie и ладно. Я поэтому пишу, что «не поддерживает юникод — это ОК» — в случае с trie однобайтовая кодировка может быть удобным вариантом.</i><br/>
<br/>
Потом с trie можно работать как со словарем:<br/>
<br/>
<pre><code class="python">&gt;&gt;&gt; trie[u'foo'] = 5
&gt;&gt;&gt; trie[u'foobar'] = 10
&gt;&gt;&gt; trie[u'bar'] = 'bar value'
&gt;&gt;&gt; trie.setdefault(u'foobar', 15)
10

&gt;&gt;&gt; u'foo' in trie
True

&gt;&gt;&gt; trie[u'foo']
5
</code></pre><br/>
Ключи должны быть юникодными :) В питоне 3.х это вполне естественно, в 2.x в примерах приходится ставить букву u, уж простите. Значения могут быть любыми питоньими объектами, что нетипично для C-реализаций trie (обычно там целые число в качестве значений). На самом деле «внутри» значения и правда представляют собой целые числа, но datrie.Trie использует их как индексы в массиве «настоящих» значений. Для тех, кому эта фича не нужна (например, значения не интересуют совсем), в datrie есть datrie.BaseTrie, который немного быстрее и умеет хранить только числа.<br/>
<br/>
Немного о скорости. Все замеры проводил на trie.Trie с сотней тысяч уникальных русский и английских слов (50/50) и int-значениями «1», другие замеры (на миллионе url'ов) можно глянуть <a href="http://stackoverflow.com/a/5479374/114795">тут</a> или (еще лучше) проводить самим на своих данных. Замеры скорости я проводил только для того, чтоб иметь какое-то общее представление о порядке величин, и чтоб отслеживать регрессии в библиотеке, так что принимайте их соответственно; весь исходный код и данные есть в репозитории. Кроме того, нигде не буду писать об асимптотической сложности различных операций, т.к. не исследовал ее. В теории должно быть как у trie из википедии (например, получение элемента или поиск по префиксу — O(m), где m — длина ключа), но детали реализации (как libdatrie, так и моей обертки) могут все менять; если кто-нибудь построит соответствующие графики, буду, конечно же, благодарен.<br/>
<br/>
Операции получения элемента, проверки in, обновления элемента работают в среднем раза в 2-3 медленнее, чем у стандартного словаря (т.е. быстро, на моем буке это от 1 до 3 млн операций в секунду для вышеупомянутого trie). Исключение — это вставка нового значения в trie, она работает значительно медленнее (порядка 50тыс операций в секунду для того же trie с русскими и английскими словами). При этом trie на таких данных занимает значительно меньше места в оперативной памяти: 3-5M (в зависимости от интерпретатора) vs 20M+ у обычного словаря <i>(замеры памяти проводил коряво и за конкретные цифры не ручаюсь)</i>.<br/>
<br/>
Т.е. datrie.Trie можно использовать как замену dict, если есть большое количество не очень длинных строк (например, слов или url'ов), данные в основном используются в режиме read-only (или «update-only») и хочется сэкономить оперативную память память ценой 2-3 кратного снижения скорости доступа.<br/>
<br/>
Чтоб этот псевдо-read-only не очень смущал, trie можно сохранять в файл и загружать из файла:<br/>
<br/>
<pre><code class="python">&gt;&gt;&gt; trie.save('my.trie')
&gt;&gt;&gt; trie2 = datrie.Trie.load('my.trie')
</code></pre><br/>
<br/>
Еще одна особенность trie — это то, что некоторые операции, которые в dict (и любой другой хэш-таблице) потребовали бы полного перебора или большого объема памяти для построения дополнительных индексов, в префиксном дереве работают почти так же быстро (а некоторые даже быстрее), как и простое получение значения.<br/>
<br/>
Можно проверить, есть ли в trie элементы, ключи у которых начинаются с данного префикса (это даже быстрее, чем простая проверка in):<br/>
<br/>
<pre><code class="python">&gt;&gt;&gt; trie.has_keys_with_prefix(u'fo')
True
</code></pre><br/>
<br/>
Можно найти все префиксы данной строки, которые есть в данном trie (это медленнее, по тестам — 500-600тыс операций/сек):<br/>
<br/>
<pre><code class="python">&gt;&gt;&gt; trie.prefixes(u'foobarbaz')
[u'foo', u'foobar']

&gt;&gt;&gt; trie.prefix_items(u'foobarbaz')
[(u'foo', 5), (u'foobar', 10)]
</code></pre><br/>
<br/>
Можно найти все элементы, у которых ключи начинаются с данной строки:<br/>
<br/>
<pre><code class="python">&gt;&gt;&gt; trie.keys(u'fo')
[u'foo', u'foobar']

&gt;&gt;&gt; trie.items(u'fo')
[(u'foo', 5), (u'foobar', 10)]

&gt;&gt;&gt; trie.values(u'foob')
[10]
</code></pre><br/>
<br/>
В последнем примере основное время сейчас тратится на построение результатов, а не на поиск, это можно оптимизировать; сейчас скорость была где-то порядка 150-300 тыс. значений/сек (например, при префиксе длиной 7 и в среднем 3 значениями это 70тыс операций/сек).<br/>
<br/>
У datrie.Trie есть еще различные методы, справку по ним и дополнительные результаты замеров скорости можно посмотреть в README в репозитории. <br/>
<br/>
Под pypy у меня все завелось на дебиане (раз в 10 медленнее, чем под cpython); на маке под pypy не завелось (с обычным питоном должно работать и на маке, и на линуксе, и под windows). C API — расширения в pypy всегда будут медленные, т.к. работают через костыль cpyext, а cython генерирует именно C API расширения. Можно было написать обертку на ctypes, но она была бы медленной под обычным питоном (и не факт что быстрой под pypy) + распространять ctypes-расширения неудобно. Ребята из pypy пилят сейчас <a href="https://bitbucket.org/cffi/cffi">cffi</a>, обещают, что он быстрый будет (и под cpython, и под pypy). Плюс, возможно, cython научится когда-нибудь генерировать не C API расширения, а cffi-расширения. Вот тогда, возможно, и наступит счастье) А пока что с pypy делать — не знаю. Ничего не буду, наверное; как-то работает все под линуксом и ладно.<br/>
<br/>
В процессе реализации столкнулся с тормознутым кодеком utf_32_le в питоне. На это есть баг с патчем ( <a href="http://bugs.python.org/issue15027">bugs.python.org/issue15027</a> ), но патч еще не закоммитили. Изначально все операции в datrie работали в 10 раз медленнее, но потом удалось в одном месте обойтись без кодирования строки стандартным питоньим utf_32_le и все заработало получше. Этот кодек используется еще в паре «горячих» мест, так что, думаю, если его ускорят, некоторые операции в datrie могут заработать еще до 2 раз быстрее.<br/>
<br/>
Итерация по дереву сейчас тоже не самая эффективная, это связано с особенностями интерфейса libdatrie. Но автор libdatrie — отличный чел и собирается все поправить, так что перспективы неплохие. <br/>
<br/>
Как обычно, патчи, баг-репорты, идеи, бенчмарки, пулл-реквесты и тд приветствуются!<br/>
<br/>
<a href="https://github.com/kmike/datrie">github</a> / <a href="https://bitbucket.org/kmike/datrie">bitbucket</a>, кому что удобнее. 
  	
  	<div class="clear"></div> 	
  	</div>
    
<ul class="tags">
	<li ><a href="http://habrahabr.ru/search/?q=%5Btrie%5D&target_type=posts" rel="tag">trie</a></li><li >, <a href="http://habrahabr.ru/search/?q=%5Bpython%5D&target_type=posts" rel="tag">python</a></li><li >, <a href="http://habrahabr.ru/search/?q=%5Bpython3%5D&target_type=posts" rel="tag">python3</a></li><li >, <a href="http://habrahabr.ru/search/?q=%5B%D1%81%D1%82%D1%80%D1%83%D0%BA%D1%82%D1%83%D1%80%D1%8B%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%5D&target_type=posts" rel="tag">структуры данных</a></li><li >, <a href="http://habrahabr.ru/search/?q=%5Bcython%5D&target_type=posts" rel="tag">cython</a></li>
</ul>

    <div class="infopanel" id="infopanel_post_147963">
	
        
	
	<div class="voting   ">

		
		
		<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
		<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
		

		<div class="mark positive ">
			
			<span class="score" title="Всего 59: &uarr;58 и &darr;1">+57</span>
			
			
		</div>

	</div>
	
	



	<div class="published">17 июля 2012 в 15:24</div>

	<div class="favorite">
		
		
		<a class="guest"  href="#" onclick="return false;" title="Только зарегистрированные пользователи могут добавлять посты в избранное"></a>
		
	</div>

	<div class="favs_count" title="Количество пользователей, добавивших пост в избранное">117</div>

	
		
		
		<div class="twitter">
			<a href="http://twitter.com/intent/tweet?text=http://habr.ru/p/147963/+%D0%9F%D1%80%D0%B5%D1%84%D0%B8%D0%BA%D1%81%D0%BD%D1%8B%D0%B5+%D0%B4%D0%B5%D1%80%D0%B5%D0%B2%D1%8C%D1%8F+%D0%B2+Python+%23habr" title="Опубликовать ссылку в Twitter" target="_blank"></a>
		</div>
		<div class="vkontakte">
			<a href="http://vkontakte.ru/share.php?url=http://habr.ru/p/147963/" title="Опубликовать ссылку во ВКонтакте" onclick="window.open(this.href, 'Опубликовать ссылку во Вконтакте', 'width=800,height=300'); return false"></a>
		</div>
		<div class="facebook">
			<a href="https://www.facebook.com/sharer/sharer.php?u=http://habr.ru/p/147963/" title="Опубликовать ссылку в Facebook" onclick="window.open(this.href, 'Опубликовать ссылку в Facebook', 'width=640,height=436,toolbar=0,status=0'); return false"></a>
		</div>
		<div class="googleplus">
			<a href="https://plus.google.com/share?url=http://habr.ru/p/147963/" title="Опубликовать ссылку в Google Plus" onclick="window.open(this.href, 'Опубликовать ссылку в Google Plus', 'width=800,height=300'); return false"></a>
		</div>
		
	

	

	

	
	

	
	
	<div class="author">

		<a title="Автор текста" href="http://habrahabr.ru/users/kmike/" >kmike</a>
		<span class="rating" title="рейтинг пользователя">182,3</span>
		
			<a href="https://plus.google.com/106509569875323993688/?rel=author" class="googleplus_profile">G+</a>
		
	</div>
	
	

	

	

</div>
<div class="clear"></div>    
    
	</div>

		
		
<div class="comments_list " id="comments">

  <h2 class="title ">комментарии (<span id="comments_count">18</span>)
  

  </h2>

   
    
<div class="comment_item" id="comment_4991131" >
	
	<span class="parent_id" data-parent_id="0"></span>
	
	
	
		<div class="info  " rel="4991131">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4991131" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark positive ">
						<span class="score" title="Всего 3: &uarr;3 и &darr;0">+3</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/aNDREIQA/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
			<a href="http://habrahabr.ru/users/aNDREIQA/" class="username">aNDREIQA</a>
			<time datetime="2012-07-17T15:37:07+04:00">17 июля 2012 в 15:37</time>
			<a href="#comment_4991131" class="link_to_comment">#</a>
			
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Спасибо! 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4991131">
	
	</div>
</div>

   
    
<div class="comment_item" id="comment_4992568" >
	
	<span class="parent_id" data-parent_id="0"></span>
	
	
	
		<div class="info  " rel="4992568">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4992568" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/BasicWolf/" class="avatar"><img src="http://media.habrahabr.ru/images/thumbs/avatars/5a/a6/62/41860/small_41860.jpg" alt="" /></a>
			<a href="http://habrahabr.ru/users/BasicWolf/" class="username">BasicWolf</a>
			<time datetime="2012-07-17T22:00:15+04:00">17 июля 2012 в 22:00</time>
			<a href="#comment_4992568" class="link_to_comment">#</a>
			
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Спасибо большое! Очень полезная библиотека и её хорошее описание.  
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4992568">
	
	</div>
</div>

   
    
<div class="comment_item" id="comment_4992680" >
	
	<span class="parent_id" data-parent_id="0"></span>
	
	
	
		<div class="info  " rel="4992680">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4992680" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/JustAMan/" class="avatar"><img src="http://media.habrahabr.ru/images/thumbs/avatars/60/0b/b4/43625/small_43625.gif" alt="" /></a>
			<a href="http://habrahabr.ru/users/JustAMan/" class="username">JustAMan</a>
			<time datetime="2012-07-17T22:44:01+04:00">17 июля 2012 в 22:44</time>
			<a href="#comment_4992680" class="link_to_comment">#</a>
			
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			А для чего нужны отдельные save и load, чем не устраивает pickle/cPickle dump/load? 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4992680">
	 
		
<div class="comment_item" id="comment_4992830" >
	
	<span class="parent_id" data-parent_id="4992680"></span>
	
	
	
		<div class="info  " rel="4992830">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4992830" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark positive ">
						<span class="score" title="Всего 2: &uarr;2 и &darr;0">+2</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/kmike/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
			<a href="http://habrahabr.ru/users/kmike/" class="username">kmike</a>
			<time datetime="2012-07-17T23:23:34+04:00">17 июля 2012 в 23:23</time>
			<a href="#comment_4992830" class="link_to_comment">#</a>
			
			
				<div class="show_tree" data-id="4992830" data-parent_id="4992680" title="Показать ветку комментариев">&#8629;</div>
				
				<a href="#comment_4992680" data-id="4992830" data-parent_id="4992680" class="to_parent">&uarr;</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Тем, что для реализации pickle-протокола для datrie.Trie пришлось бы писать свою сериализацию trie в байты (на С или Cython). <br/>
<br/>
Не то чтобы это было очень сложно, но работы хватит, за час не напишу, наверное. В libdatrie уже есть поддержка сохранения trie в файл на диске, поэтому в datrie реализовано сохранение в файл: методы save и write. Метод write не документирован, но позволяет писать trie в открытый питоний file. <br/>
<br/>
Поддержка pickle была бы хорошей фичей, но ее пока нет, т.к. ее делать было сложнее, чем просто сохранение в файл. Патчи, понятное дело, приветствуются) 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4992830">
	 
		
<div class="comment_item" id="comment_4993093" >
	
	<span class="parent_id" data-parent_id="4992830"></span>
	
	
	
		<div class="info  " rel="4993093">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4993093" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark positive ">
						<span class="score" title="Всего 2: &uarr;2 и &darr;0">+2</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/marklarius/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
			<a href="http://habrahabr.ru/users/marklarius/" class="username">marklarius</a>
			<time datetime="2012-07-18T01:36:27+04:00">18 июля 2012 в 01:36</time>
			<a href="#comment_4993093" class="link_to_comment">#</a>
			
			
				<div class="show_tree" data-id="4993093" data-parent_id="4992830" title="Показать ветку комментариев">&#8629;</div>
				
				<a href="#comment_4992830" data-id="4993093" data-parent_id="4992830" class="to_parent">&uarr;</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Можно «схитрить» (не бейте сильно...):<br/>
<br/>
<pre><code class="python">import cPickle, datrie, string
from datrie import AlphaMap

class PickledTrie(datrie.Trie):
    _alpha_map = None

    def __init__(self, alpha_map=None, _create=True):
        self._alpha_map = alpha_map
        super(PickledTrie, self).__init__(AlphaMap(alpha_map), _create)

    def __reduce__(self):
        return PickledTrie, (self._alpha_map, ), None, None, iter(self.items())
    
    def __setitem__(self, k, v):
        super(PickledTrie, self).__setitem__(k, v)


pt = PickledTrie(string.ascii_lowercase)
pt[u'foo'] = u'bar'

with open('tmp.dat', 'wb') as f:
    cPickle.dump(pt, f)

with open('tmp.dat', 'rb') as f:
    z = cPickle.load(f)
    print z.items()

</code></pre> 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4993093">
	 
		
<div class="comment_item" id="comment_4993096" >
	
	<span class="parent_id" data-parent_id="4993093"></span>
	
	
	
		<div class="info  " rel="4993096">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4993096" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/marklarius/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
			<a href="http://habrahabr.ru/users/marklarius/" class="username">marklarius</a>
			<time datetime="2012-07-18T01:36:53+04:00">18 июля 2012 в 01:36</time>
			<a href="#comment_4993096" class="link_to_comment">#</a>
			
			
				<div class="show_tree" data-id="4993096" data-parent_id="4993093" title="Показать ветку комментариев">&#8629;</div>
				
				<a href="#comment_4993093" data-id="4993096" data-parent_id="4993093" class="to_parent">&uarr;</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			__setitem__ лишний, забыл стереть… 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4993096">
	
	</div>
</div>

	 
		
<div class="comment_item" id="comment_4993139" >
	
	<span class="parent_id" data-parent_id="4993093"></span>
	
	
	
		<div class="info  " rel="4993139">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4993139" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/kmike/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
			<a href="http://habrahabr.ru/users/kmike/" class="username">kmike</a>
			<time datetime="2012-07-18T02:05:51+04:00">18 июля 2012 в 02:05</time>
			<a href="#comment_4993139" class="link_to_comment">#</a>
			
			
				<div class="show_tree" data-id="4993139" data-parent_id="4993093" title="Показать ветку комментариев">&#8629;</div>
				
				<a href="#comment_4993093" data-id="4993139" data-parent_id="4993093" class="to_parent">&uarr;</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Хм, да, можно. Но это такой «хак», понятное дело) <br/>
<br/>
Метод .items() без префиксов сейчас тормозной (раз в 20-30 медленнее, чем у словаря); для сохранения и загрузки придется дублировать trie в памяти в «развернутом» виде (а с текущими save-load можно большой список слов в trie загрузить без загрузки всех отдельных слов как питоньих строк); у AlphaMap есть еще параметр ranges, который может быть использовать удобнее, чем alphabet (и который тут никак не передать). <br/>
<br/>
Но мне нравится) Необходимость создавать отдельный AlphaMap хорошо бы все равно из API убирать. <br/>
<br/>
Вот только если потом пиклинг переписать по-нормальному, то станет нельзя загружать старые trie, сохраненные этим вариантом. Способы обхода есть (например, распиклить trie старой версией, сохранить в файл через save и загрузить через load новой), но мне пока неочевидно, что игра стоит свеч, т.к. не очень представляю, зачем именно пиклинг может понадобиться. А правда, зачем? 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4993139">
	 
		
<div class="comment_item" id="comment_4993145" >
	
	<span class="parent_id" data-parent_id="4993139"></span>
	
	
	
		<div class="info  " rel="4993145">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4993145" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/marklarius/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
			<a href="http://habrahabr.ru/users/marklarius/" class="username">marklarius</a>
			<time datetime="2012-07-18T02:08:20+04:00">18 июля 2012 в 02:08</time>
			<a href="#comment_4993145" class="link_to_comment">#</a>
			
			
				<div class="show_tree" data-id="4993145" data-parent_id="4993139" title="Показать ветку комментариев">&#8629;</div>
				
				<a href="#comment_4993139" data-id="4993145" data-parent_id="4993139" class="to_parent">&uarr;</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			А фиг его знает, кому «чистый» пиклинг нужен, мне хотелось поигратся… Хотя да, кривовато вышло. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4993145">
	 
		
<div class="comment_item" id="comment_4993154" >
	
	<span class="parent_id" data-parent_id="4993145"></span>
	
	
	
		<div class="info  " rel="4993154">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4993154" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/kmike/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
			<a href="http://habrahabr.ru/users/kmike/" class="username">kmike</a>
			<time datetime="2012-07-18T02:12:48+04:00">18 июля 2012 в 02:12</time>
			<a href="#comment_4993154" class="link_to_comment">#</a>
			
			
				<div class="show_tree" data-id="4993154" data-parent_id="4993145" title="Показать ветку комментариев">&#8629;</div>
				
				<a href="#comment_4993145" data-id="4993154" data-parent_id="4993145" class="to_parent">&uarr;</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Я, в принципе, за кривые решения, если они позволяют что-то сделать полезное и их потом можно заменить на «прямые» без смены интерфейса) Но тут вылезает досадная неприятность с обновлением со старой версии + польза не очевидна, поэтому в библиотеку этот вариант добавлять не хочется. <br/>
<br/>
Можно в вики добавить, вдруг кому пригодится) 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4993154">
	 
		
<div class="comment_item" id="comment_4993160" >
	
	<span class="parent_id" data-parent_id="4993154"></span>
	
	
	
		<div class="info  " rel="4993160">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4993160" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/marklarius/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
			<a href="http://habrahabr.ru/users/marklarius/" class="username">marklarius</a>
			<time datetime="2012-07-18T02:15:38+04:00">18 июля 2012 в 02:15</time>
			<a href="#comment_4993160" class="link_to_comment">#</a>
			
			
				<div class="show_tree" data-id="4993160" data-parent_id="4993154" title="Показать ветку комментариев">&#8629;</div>
				
				<a href="#comment_4993154" data-id="4993160" data-parent_id="4993154" class="to_parent">&uarr;</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Я не против… Кстати, с удовольствием попробую решить другие проблемы/накатать фичи для datrie. Есть предложения? 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4993160">
	 
		
<div class="comment_item" id="comment_4993204" >
	
	<span class="parent_id" data-parent_id="4993160"></span>
	
	
	
		<div class="info  " rel="4993204">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4993204" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/kmike/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
			<a href="http://habrahabr.ru/users/kmike/" class="username">kmike</a>
			<time datetime="2012-07-18T03:13:53+04:00">18 июля 2012 в 03:13</time>
			<a href="#comment_4993204" class="link_to_comment">#</a>
			
			
				<div class="show_tree" data-id="4993204" data-parent_id="4993160" title="Показать ветку комментариев">&#8629;</div>
				
				<a href="#comment_4993160" data-id="4993204" data-parent_id="4993160" class="to_parent">&uarr;</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Добавил в вики. Предложения — конечно, есть :) <br/>
<br/>
* реализовать больше методов стандартного питоньего словаря (простор есть — от простых get и pop до хитрых viewitems);<br/>
<br/>
* подумать, как убрать AlphaMap из публичного интерфейса (и datrie.new, наверное, тоже);<br/>
<br/>
* добавить поддержку ключей-байтовых строк для второго питона (обязательно проверив на бенчмарках, что это ничего не затормозило для юникодных строк) — скорее всего, просто декодировать их в юникод из ascii; если затормозило — не добавлять, а явно задокументировать «не будет этого», отрицательный результат — тоже результат;<br/>
<br/>
* реализовать аналог lookup c deepsearch='choose' из <a href="http://search.cpan.org/~avif/Tree-Trie-1.9/Trie.pm">Trie::Trie</a>. В datrie это, видимо, выльется в 3 метода first_key(prefix), first_item(prefix), first_value(prefix). С другой стороны, эти методы могут быть не очень нужны, если iteritems(prefix) будет реализован, т.к. они станут просто чуть более эффективной версией next(trie.iteritems(prefix)). С третьей стороны, они все равно могут быть полезны, т.к. они будут более эффективны + еще неизвестно, когда iteritems получится сделать.<br/>
<br/>
* скрипт для бенчмарков довольно неудобный — все запускается сразу и ждать долговато; какой-то интерфейс командной строки к нему был бы очень кстати;<br/>
<br/>
* любые дополнительные бенчмарки — это хорошо (и не только скорости: например, нормальный скрипт замера оперативной памяти — см. psutil и <a href="https://github.com/fabianp/memory_profiler">github.com/fabianp/memory_profiler</a> ); вдруг что-то интересно узнать самому?;<br/>
<br/>
* можно в самой libdatrie реализовать итерацию по дереву с каким-то iterator-object, и функциями в духе «next_state(const Trie* trie, IteratorState* state)» и послать патч автору libdatrie; после этого можно переписывать BaseTrie._walk_prefixes и добавлять публичный питоний интерфейс для гуляния по дереву. Theppitak Karoonboonyanan собирался в libdatrie поддержку итерации сам добавить, но не факт, что скоро;<br/>
<br/>
* возможно, __len__ у Trie может быть быстрее (т.к. в отличие от BaseTrie у нас есть self.values — но как это будет работать совместно с __delitem__?)<br/>
<br/>
* попробовать прогнать тесты на narrow-сборке питона (там сейчас довольно ковбойский метод кодирования питоньего юникода в AlphaChar*, в портабельности которого я до конца не уверен);<br/>
<br/>
* ну или просто использовать библиотеку для своих нужд — недостающие фичи или проблемы сами вылезут со временем) 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4993204">
	 
		
<div class="comment_item" id="comment_4993793" >
	
	<span class="parent_id" data-parent_id="4993204"></span>
	
	
	
		<div class="info  " rel="4993793">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4993793" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/marklarius/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
			<a href="http://habrahabr.ru/users/marklarius/" class="username">marklarius</a>
			<time datetime="2012-07-18T11:46:24+04:00">18 июля 2012 в 11:46</time>
			<a href="#comment_4993793" class="link_to_comment">#</a>
			
			
				<div class="show_tree" data-id="4993793" data-parent_id="4993204" title="Показать ветку комментариев">&#8629;</div>
				
				<a href="#comment_4993204" data-id="4993793" data-parent_id="4993204" class="to_parent">&uarr;</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Вечером пошурую немного, может толк выйдет. Кстати, спасибо за extension! 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4993793">
	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

	 
		
<div class="comment_item" id="comment_4994229" >
	
	<span class="parent_id" data-parent_id="4993093"></span>
	
	
	
		<div class="info  " rel="4994229">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4994229" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/JustAMan/" class="avatar"><img src="http://media.habrahabr.ru/images/thumbs/avatars/60/0b/b4/43625/small_43625.gif" alt="" /></a>
			<a href="http://habrahabr.ru/users/JustAMan/" class="username">JustAMan</a>
			<time datetime="2012-07-18T13:58:17+04:00">18 июля 2012 в 13:58</time>
			<a href="#comment_4994229" class="link_to_comment">#</a>
			
			
				<div class="show_tree" data-id="4994229" data-parent_id="4993093" title="Показать ветку комментариев">&#8629;</div>
				
				<a href="#comment_4993093" data-id="4994229" data-parent_id="4993093" class="to_parent">&uarr;</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Тот вариант, что родился у меня вчера в голове… Что-то в таком роде (не проверял, код из головы, но идея, думаю, ясна):<br/>
<pre><code class="python">import cPickle, datrie, tempfile, os

class PicklableTrie(datrie.Trie):
    def __reduce__(self):
        tempHandle, tempName = tempfile.mkstemp()
        try:
            os.close(tempHandle) # close the file we opened; now we'd save into it
            self.save(tempName)
            with open(tempName, 'rb') as inp:
                return datrie.__version__, inp.read()
        finally:
            os.unlink(tempName)

    def __setstate__(self, newState):
        assert datrie.__version__ == newState[0]
        tempHandle, tempName = tempfile.mkstemp()
        try:
            os.close(tempHandle) # close the file we opened; now we'd save into it
            with open(tempName, 'wb') as out:
                out.write(newState[1])
            self.load(tempName)
        finally:
            os.unlink(tempName)</code></pre><br/>
А вообще всё было бы куда проще и элегантнее, если бы save/load принимали не строки-имена файлов, а file-like object'ы. Тогда этот tempfile не нужен, и pickle обеспечивается за счёт класса StringIO.StringIO. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4994229">
	 
		
<div class="comment_item" id="comment_4994264" >
	
	<span class="parent_id" data-parent_id="4994229"></span>
	
	
	
		<div class="info  " rel="4994264">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4994264" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/JustAMan/" class="avatar"><img src="http://media.habrahabr.ru/images/thumbs/avatars/60/0b/b4/43625/small_43625.gif" alt="" /></a>
			<a href="http://habrahabr.ru/users/JustAMan/" class="username">JustAMan</a>
			<time datetime="2012-07-18T14:07:15+04:00">18 июля 2012 в 14:07</time>
			<a href="#comment_4994264" class="link_to_comment">#</a>
			
			
				<div class="show_tree" data-id="4994264" data-parent_id="4994229" title="Показать ветку комментариев">&#8629;</div>
				
				<a href="#comment_4994229" data-id="4994264" data-parent_id="4994229" class="to_parent">&uarr;</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Кстати, если я правильно понимаю файлики-сорцы, то нужные для использования file-like object'a пункты можно довольно легко портировать из самой либы в обёртку, либо заменить fileutils.c, научив функции file_write_* и file_read_* работать с file-like питоновскими объектами. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4994264">
	 
		
<div class="comment_item" id="comment_4994362" >
	
	<span class="parent_id" data-parent_id="4994264"></span>
	
	
	
		<div class="info  " rel="4994362">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4994362" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/kmike/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
			<a href="http://habrahabr.ru/users/kmike/" class="username">kmike</a>
			<time datetime="2012-07-18T14:40:33+04:00">18 июля 2012 в 14:40</time>
			<a href="#comment_4994362" class="link_to_comment">#</a>
			
			
				<div class="show_tree" data-id="4994362" data-parent_id="4994264" title="Показать ветку комментариев">&#8629;</div>
				
				<a href="#comment_4994264" data-id="4994362" data-parent_id="4994264" class="to_parent">&uarr;</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Угу, про костыль с временными файлами тоже думал. В принципе, этот вариант даже получше, чем явная сериализация items, т.к. требует меньше оперативной памяти.<br/>
<br/>
Понятное дело, было бы проще, если б file-like объекты все поддерживало) Но там одним изменением fileutils не отделаешься, т.к. вся библиотека работает с FILE* и подразумевает наличие «настоящего» файла (tail.c/tail_fread, darray.c/da_fread). <br/>
<br/>
Кроме того, хорошо бы отвязываться от апстрима по минимуму — если можно в C-код изменений не вносить, то не вносить их; если и вносить, то такие, которые можно в апстрим пропихнуть (== неспецифичные для питона) — например, фикс для MSVC2008 так в транке libdatrie появился недавно.<br/>
<br/>
В том, чтоб встать на путь правки самой библиотеки, есть плюсы — например, можно было бы попробовать минимизировать преобразования PyUnicode &lt;-&gt; AlphaChar* + возможно, сделать TrieData == PyObject*. Кстати, ruby-расширения для libdatrie на этот путь и встало. Но и минусы очевидны — меньше пользы для мировой цивилизации, сложнее обновляться, больше кода поддерживать. <br/>
<br/>
Поэтому конкретно для «правильной» сериализации я бы предпочел дополнительные функции (на С или Cython), а не правку библиотеки. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4994362">
	 
		
<div class="comment_item" id="comment_4995069" >
	
	<span class="parent_id" data-parent_id="4994362"></span>
	
	
	
		<div class="info  " rel="4995069">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4995069" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/JustAMan/" class="avatar"><img src="http://media.habrahabr.ru/images/thumbs/avatars/60/0b/b4/43625/small_43625.gif" alt="" /></a>
			<a href="http://habrahabr.ru/users/JustAMan/" class="username">JustAMan</a>
			<time datetime="2012-07-18T18:09:10+04:00">18 июля 2012 в 18:09</time>
			<a href="#comment_4995069" class="link_to_comment">#</a>
			
			
				<div class="show_tree" data-id="4995069" data-parent_id="4994362" title="Показать ветку комментариев">&#8629;</div>
				
				<a href="#comment_4994362" data-id="4995069" data-parent_id="4994362" class="to_parent">&uarr;</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Ну тогда можно костыль со временными файлами загнать прямо в Cython-обёртку: <a href="http://www.cplusplus.com/reference/clibrary/cstdio/tmpfile/">www.cplusplus.com/reference/clibrary/cstdio/tmpfile/</a> и *_fwrite() из libdatrie 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4995069">
	 
		
<div class="comment_item" id="comment_4995251" >
	
	<span class="parent_id" data-parent_id="4995069"></span>
	
	
	
		<div class="info  " rel="4995251">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4995251" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark  ">
						<span class="score" title="Всего 0: &uarr;0 и &darr;0">0</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/kmike/" class="avatar"><img src="http://habrahabr.ru/i/avatars/stub-user-small.gif" alt="" /></a>
			<a href="http://habrahabr.ru/users/kmike/" class="username">kmike</a>
			<time datetime="2012-07-18T19:06:07+04:00">18 июля 2012 в 19:06</time>
			<a href="#comment_4995251" class="link_to_comment">#</a>
			
			
				<div class="show_tree" data-id="4995251" data-parent_id="4995069" title="Показать ветку комментариев">&#8629;</div>
				
				<a href="#comment_4995069" data-id="4995251" data-parent_id="4995069" class="to_parent">&uarr;</a>
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Можно. Нет желания сделать pull request?) Или сам могу добавить.<br/>
<br/>
Мне вот только гугл говорит, что tmpfile из stdio может требовать административных прав под windows, так что я бы не стал его использовать; может быть лучше использовать менее прямой вариант с питоним tempfile. 
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4995251">
	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

	
	</div>
</div>

   
    
<div class="comment_item" id="comment_4994571" >
	
	<span class="parent_id" data-parent_id="0"></span>
	
	
	
		<div class="info  " rel="4994571">
			<div class="folding-dot-holder"><div class="folding-dot"></div></div>
			
			<div id="voting_4994571" class="voting   ">
										
				
					<span class="plus" title="Голосовать могут только зарегистрированные пользователи."></span>
					<span class="minus" title="Голосовать могут только зарегистрированные пользователи."></span>
				
				<div class="mark positive ">
						<span class="score" title="Всего 2: &uarr;2 и &darr;0">+2</span> 
				</div>	 
			</div>
			
			<a href="http://habrahabr.ru/users/Flux/" class="avatar"><img src="http://media.habrahabr.ru/images/thumbs/avatars/22/2c/c9/24381/small_24381.jpg" alt="" /></a>
			<a href="http://habrahabr.ru/users/Flux/" class="username">Flux</a>
			<time datetime="2012-07-18T15:42:40+04:00">18 июля 2012 в 15:42</time>
			<a href="#comment_4994571" class="link_to_comment">#</a>
			
			
			<span class="to_chidren"></span>
			<div class="clear"></div>
		</div>
		<div class="message html_format ">
			Отличная статья, автору спасибо.<br/>
Надо бы допилить до вменяемого состояния свою .NET реализацию по мотивам которой я и писал ту статью по ссылке. Интересно будет сравнить быстродействие, хотя вряд ли оно приблизится к сишной реализации.  
		</div>
		<div class="reply">
			
		</div>
	
	<div class="reply_comments" id="reply_comments_4994571">
	
	</div>
</div>

  
</div>

		
	
		
			<p class="for_users_only_msg">Только зарегистрированные пользователи могут оставлять комментарии. <a href="http://habrahabr.ru/login/">Войдите</a>, пожалуйста.</p>
		
		
	



		
<form action="/json/favorites/" method="post" id="edit_tags_form" class="hidden">
  <input type="hidden" name="action" value="add" />
  <input type="hidden" name="ti" value="0" />
  <input type="hidden" name="tt" value="0" />
  <label>Пометьте топик понятными вам метками, если хотите</label>
  <input type="text" name="tags_string" class="tags_string" />
  <div class="description">Метки лучше разделять запятой. Например: <i>общение, социальные сети, myspace.com, подростки, мердок</i></div>
  <input type="submit" value="Сохранить" class="submit" /> или <a href="#" class="close" onclick="return close_edit_tags()">закрыть</a>
</form>
    
	
	

  </div>
  <div class="sidebar_right">
	
		
		




	<div class="banner_240x400">

		<script type="text/javascript">
			(function(){
				var custom = [];
			/* custom params */
			
				custom[1]	= 'python';
			
				

			/* end of custom params */
				custom.getStd = function(){for(var i=0,j,s=[];i<this.length;i++){if(this[i])s.push((!j?(j=1,i+'='):'')+escape(this[i]));else j=0}return s.length?'&custom='+s.join(';'):''};

				var RndNum4NoCash = Math.round(Math.random() * 1000000000),
					ar_Tail = escape(document.referrer || 'unknown');
				document.write('<iframe src="http://ad.adriver.ru/cgi-bin/erle.cgi?'
					+ 'sid=176776&target=top&bt=22&pz=0&rnd=' + RndNum4NoCash + '&tail256=' + ar_Tail + custom.getStd()
					+ '" frameborder=0 vspace=0 hspace=0 width=240 height=400 marginwidth=0'
					+ ' marginheight=0 scrolling=no></iframe>');
			})();
		</script>

	</div>





		

<div class="block daily_best_posts">
  <div class="title">Лучшее <sup>за 24 часа</sup> &darr; </div>
  <div class="posts_list">
    
      <div class="post_item">
        
				
				
				
				
				

        <a href="/post/149038/" class="post_name">Ectognathus, робот-хексапод на микро-сервах своими руками, часть вторая</a>
      </div>
    
      <div class="post_item">
        
				
				
				
				
				

        <a href="/post/149037/" class="post_name">Выборочная деанимация видео</a>
      </div>
    
      <div class="post_item">
        
				
				
				
				
				

        <a href="/post/149059/" class="post_name">Делаем свою Time Machine для Линукса</a>
      </div>
    
      <div class="post_item">
        
				
				
				
				
				

        <a href="/post/149040/" class="post_name">Введение в CSS Regions</a>
      </div>
    
      <div class="post_item">
        
				
				
				
				
				

        <a href="/post/149046/" class="post_name">Энергосберегающие лампы. Мини-хак против «подмигивания»</a>
      </div>
    
      <div class="post_item">
        
				
				
				
				
				

        <a href="/post/149053/" class="post_name">Профилирование JavaScript с Chrome Developer Tools</a>
      </div>
    
      <div class="post_item">
        
				
				
				
				
				

        <a href="/post/149036/" class="post_name">Начинаем работать с Ember.js</a>
      </div>
    
      <div class="post_item">
        
				
				
				
				
				

        <a href="/post/149056/" class="post_name">Частичное применение и каррирование в C++</a>
      </div>
    
      <div class="post_item">
        
				
				
				
				
				

        <a href="/post/149050/" class="post_name">Google снова закрывает сервисы: Google Apps For Teams, Google Listen и Google Video For Business</a>
      </div>
    
      <div class="post_item">
        
				
				
				
				
				

        <a href="/post/149041/" class="post_name">12 принципов производительности Эмерсона для фрилансера</a>
      </div>
    
  </div>
  <div class="all">&laquo; <a href="/top/">все лучшие</a></div>
</div>

		


<div class="block similar_posts">

	<div class="title">Похожие посты &darr; </div>
  <div class="posts_list">
  	
    	<div class="post_item">
    				<a class="post_name" href="/post/66926/">Структуры данных: бинарные деревья. Часть 2: обзор сбалансированных деревьев</a>
    				<span class="when">12.08.2009</span>
      </div>
  	
    	<div class="post_item">
    				<a class="post_name" href="/post/65617/">Структуры данных: бинарные деревья. Часть 1</a>
    				<span class="when">09.08.2009</span>
      </div>
  	
    	<div class="post_item">
    				<a class="post_name" href="/post/59365/">Онлайн База Данных, сервис структур данных, динамическая объектно-реляционная проекция (Dynamic ORM)</a>
    				<span class="when">12.05.2009</span>
      </div>
  	
    	<div class="post_item">
    				<a class="post_name" href="/post/146503/">Структура данных проекта OpenStreetMap, заглянем под юбку сервису</a>
    				<span class="when">25.06.2012</span>
      </div>
  	
    	<div class="post_item">
    				<a class="post_name" href="/post/144054/">Структуры данных, используемые в Redis</a>
    				<span class="when">17.05.2012</span>
      </div>
  	
    	<div class="post_item">
    				<a class="post_name" href="/post/128017/">Структуры данных в картинках. HashMap</a>
    				<span class="when">05.10.2011</span>
      </div>
  	
    	<div class="post_item">
    				<a class="post_name" href="/post/127864/">Структуры данных в картинках. LinkedList</a>
    				<span class="when">22.09.2011</span>
      </div>
  	
    	<div class="post_item">
    				<a class="post_name" href="/post/128457/">Свой инструмент нужно знать в лицо: обзор наиболее часто используемых структур данных</a>
    				<span class="when">14.09.2011</span>
      </div>
  	
    	<div class="post_item">
    				<a class="post_name" href="/post/128269/">Структуры данных в картинках. ArrayList</a>
    				<span class="when">12.09.2011</span>
      </div>
  	
    	<div class="post_item">
    				<a class="post_name" href="/post/118554/">Еще одна визуализация ряда алгоритмов и структур данных</a>
    				<span class="when">03.05.2011</span>
      </div>
  	
  </div>			
</div>




		


<div class="block live_broadcast_activity">
  <div class="title">Прямой эфир &darr; </div>
  <div class="posts_list">

    <div class="post_item">
      <a href="http://habrahabr.ru/users/vvzvlad/" class="user_name">vvzvlad</a> &rarr;
      <a href="/post/149049/#comment_5036104" class="post_name">Обзор китайского смартфона ZOPO zp500</a>&nbsp;<span class="count">38</span>
    </div>

    <div class="post_item">
      <a href="http://habrahabr.ru/users/kirushik/" class="user_name">kirushik</a> &rarr;
      <a href="/post/149059/#comment_5036102" class="post_name">Делаем свою Time Machine для Линукса</a>&nbsp;<span class="count">31</span>
    </div>

    <div class="post_item">
      <a href="http://habrahabr.ru/users/monkegoist/" class="user_name">monkegoist</a> &rarr;
      <a href="/post/149063/#comment_5036101" class="post_name">Кастомная обработка jUnit тестов в TeamCity</a>&nbsp;<span class="count">3</span>
    </div>

    <div class="post_item">
      <a href="http://habrahabr.ru/users/andorro/" class="user_name">andorro</a> &rarr;
      <a href="/post/149029/#comment_5036097" class="post_name">12 вещей, о которых нужно помнить в работе с клиентами</a>&nbsp;<span class="count">14</span>
    </div>

    <div class="post_item">
      <a href="http://habrahabr.ru/users/Ariman/" class="user_name">Ariman</a> &rarr;
      <a href="/post/149038/#comment_5036091" class="post_name">Ectognathus, робот-хексапод на микро-сервах своими руками, часть вторая</a>&nbsp;<span class="count">45</span>
    </div>

    <div class="post_item">
      <a href="http://habrahabr.ru/users/plustilino/" class="user_name">plustilino</a> &rarr;
      <a href="/post/149062/#comment_5036090" class="post_name">Идея организации распределенной сетевой инфраструктуры смешанного типа для публикации электронных образовательных ресурсов</a>&nbsp;<span class="count">1</span>
    </div>

    <div class="post_item">
      <a href="http://habrahabr.ru/users/chainik/" class="user_name">chainik</a> &rarr;
      <a href="/post/149041/#comment_5036086" class="post_name">12 принципов производительности Эмерсона для фрилансера</a>&nbsp;<span class="count">11</span>
    </div>

    <div class="post_item">
      <a href="http://habrahabr.ru/users/POS_troi/" class="user_name">POS_troi</a> &rarr;
      <a href="/post/149046/#comment_5036082" class="post_name">Энергосберегающие лампы. Мини-хак против «подмигивания»</a>&nbsp;<span class="count">79</span>
    </div>

    <div class="post_item">
      <a href="http://habrahabr.ru/users/sphinks/" class="user_name">sphinks</a> &rarr;
      <a href="/post/149031/#comment_5036080" class="post_name">Ассоциативные запоминающие устройства</a>&nbsp;<span class="count">7</span>
    </div>

    <div class="post_item">
      <a href="http://habrahabr.ru/users/NeonMercury/" class="user_name">NeonMercury</a> &rarr;
      <a href="/post/149071/#comment_5036079" class="post_name">Создаем игру на SFML</a>&nbsp;<span class="count">1</span>
    </div>

  </div>
  
</div>



  
		







<style>
	/**
	 * tpl/posts/_sidebar/htmlblock/_alfabank.tpl
	 *
	 * Стили для HTML_блока "alfabank_htmlblock" 
	 */
	.sidebar_right .block.alfabank_htmlblock{background: #F0F0E7;text-align: left;}
	.sidebar_right .block.alfabank_htmlblock .logo{width:195px;height:31px;background: url(/images/sidebar/htmlblock/alfabank/logo.png) no-repeat left top;margin-left: 14px;margin-bottom:10px;}
	.sidebar_right .block.alfabank_htmlblock ul{background: url(/images/sidebar/htmlblock/alfabank/icons.png) no-repeat 12px 20px;margin-bottom:10px;}
	.sidebar_right .block.alfabank_htmlblock ul li{font-size:13px;color:#0d0d0d;padding-left:50px;padding-top:10px;padding-bottom:10px;border-top: 1px solid #D6D7D1;box-shadow: 0px -1px 0px #FBFBFA ;}
	.sidebar_right .block.alfabank_htmlblock ul li a{text-decoration: none;color:#0d0d0d;}
	.sidebar_right .block.alfabank_htmlblock .bottom_buttons .ios{background: url(/images/sidebar/htmlblock/alfabank/buttons.png) no-repeat left top;width:114px;height:42px;display: inline-block;}
	.sidebar_right .block.alfabank_htmlblock .bottom_buttons .android{background: url(/images/sidebar/htmlblock/alfabank/buttons.png) no-repeat right top;width:142px;height:42px;display: inline-block;}
	.sidebar_right .block.alfabank_htmlblock .bottom_buttons{border-top:1px dashed #bdbcb5;background: #e6e7dc;
	-webkit-border-bottom-right-radius: 5px;
-webkit-border-bottom-left-radius: 5px;
-moz-border-radius-bottomright: 5px;
-moz-border-radius-bottomleft: 5px;
border-bottom-right-radius: 5px;
border-bottom-left-radius: 5px;
margin:0px -20px -15px;
padding:10px 20px;}
</style>
        


<div class="block alfabank_htmlblock">
	<div class="logo"></div>
	
		<ul>
			<li><a class="ul" href="http://ad.adriver.ru/cgi-bin/click.cgi?sid=1&ad=349594&bt=21&bid=1905822&bn=1905822&rnd=1335679152">Переводы с карты на карту<br>даже <b>не являясь клиентом</b><br>Альфа Банка.</a></li>	
			<li><a class="ul" href="http://ad.adriver.ru/cgi-bin/click.cgi?sid=1&ad=349594&bt=21&bid=1905822&bn=1905822&rnd=1335679152">Поиск <b>ближайших банкоматов</b><br>и отображение статуса<br>их работы.</a></li>
			<li><a class="ul" href="http://ad.adriver.ru/cgi-bin/click.cgi?sid=1&ad=349594&bt=21&bid=1905822&bn=1905822&rnd=1335679152">Поиск <b>ближайших отделений</b><br>и отображение их<br>загруженности.</a></li>
			<li><a class="ul" href="http://ad.adriver.ru/cgi-bin/click.cgi?sid=1&ad=349594&bt=21&bid=1905822&bn=1905822&rnd=1335679152">Просмотр актуальных<br><b>курсов валют</b>.</a></li>
		</ul>
	
	<div class="bottom_buttons">
		<a href="http://ad.adriver.ru/cgi-bin/click.cgi?sid=1&ad=349594&bt=21&bid=1893768&bn=1893768&rnd=1327380329" class="ios"></a>
		<a href="http://ad.adriver.ru/cgi-bin/click.cgi?sid=1&ad=349594&bt=21&bid=1893771&bn=1893771&rnd=448809152" class="android"></a>
	</div>


<!--  AdRiver code START. Type:counter(zeropixel) Site: SP SZ: alfa_hatmlblock PZ: 0 BN: 0 -->
<script language="javascript" type="text/javascript"><!--
var RndNum4NoCash = Math.round(Math.random() * 1000000000);
var ar_Tail='unknown'; if (document.referrer) ar_Tail = escape(document.referrer);
document.write('<img src="http://ad.adriver.ru/cgi-bin/rle.cgi?' + 'sid=179440&sz=alfa_hatmlblock&bt=21&pz=0&rnd=' + RndNum4NoCash + '&tail256=' + ar_Tail + '" border=0 width=1 height=1>')
//--></script>
<noscript><img src="http://ad.adriver.ru/cgi-bin/rle.cgi?sid=179440&sz=alfa_hatmlblock&bt=21&pz=0&rnd=786734863" border=0 width=1 height=1></noscript>
<!--  AdRiver code END  -->

</div>









   
		

<div class="block best_company">

		<div class="title">Компания дня <img src="/i/bg_cicle_help.png" title="
Компания, чей пост набрал максимальное количество баллов<br>
среди всех опубликованных в корпоративных блогах постах за <br>
прошедшие сутки. Учитываются посты, для которых истек срок голосования <br>(3 дня с момента публикации)." class="help-tip"></div>

		<div class="company_info">
			<div class="name">
			 <img class="favicon" src="/media/company/favicon/1/favicon_85.ico" alt="1С-Битрикс" height="16" width="16" />
			 <div class="company_name"><a href="http://habrahabr.ru/company/bitrix/" class="title">1С-Битрикс</a></div>
			</div>

			<p>Последний пост:
				<a href="http://habrahabr.ru/company/bitrix/blog/148874/">Еще 12 «рецептов приготовления» MySQL в Битрикс24</a>
			</p>

			<div class="buttons">
  			<div id="fans_count">562 подписчика</div>
  			
			</div>
		</div>

	</div>


		

<div class="block qa_activity">
  <div class="title">Q&A &darr; </div>
  <div class="posts_list">

    <div class="post_item">
      <a href="http://habrahabr.ru/users/Fortop/" class="user_name">Fortop</a> &rarr;
      <a href="http://habrahabr.ru/qa/22366/#answer_91588" class="post_name">Как сделать фильтр с условием OR в Sphinx</a>&nbsp;<span class="count">1</span>
    </div>

    <div class="post_item">
      <a href="http://habrahabr.ru/users/WST/" class="user_name">WST</a> &rarr;
      <a href="http://habrahabr.ru/qa/22352/#comment_107867" class="post_name">Хороший европейский хостинг с быстрым пингом для России?</a>&nbsp;<span class="count">4</span>
    </div>

    <div class="post_item">
      <a href="http://habrahabr.ru/users/itforge/" class="user_name">itforge</a> &rarr;
      <a href="http://habrahabr.ru/qa/22323/#comment_107866" class="post_name">Selenium WebDriver как остановить загрузку страницы?</a>&nbsp;<span class="count">2</span>
    </div>

    <div class="post_item">
      <a href="http://habrahabr.ru/users/Lapteuh/" class="user_name">Lapteuh</a> &rarr;
      <a href="http://habrahabr.ru/qa/22350/#comment_107865" class="post_name">Как организовать очередь задач в AppEngine?</a>&nbsp;<span class="count">2</span>
    </div>

    <div class="post_item">
      <a href="http://habrahabr.ru/users/Angerslave/" class="user_name">Angerslave</a> &rarr;
      <a href="http://habrahabr.ru/qa/22333/#comment_107863" class="post_name">Какую музыку включать в сервисном центре/Торговом зале?</a>&nbsp;<span class="count">8</span>
    </div>

    <div class="post_item">
      <a href="http://habrahabr.ru/users/sneer/" class="user_name">sneer</a> &rarr;
      <a href="http://habrahabr.ru/qa/21934/#answer_91587" class="post_name">Как &quot;упаковать&quot; статический сайт и standalone-браузер в один .exe?</a>&nbsp;<span class="count">11</span>
    </div>

    <div class="post_item">
      <a href="http://habrahabr.ru/users/TheMengzor/" class="user_name">TheMengzor</a> &rarr;
      <a href="http://habrahabr.ru/qa/22342/#answer_91585" class="post_name">Почему полосит монитор?</a>&nbsp;<span class="count">4</span>
    </div>

    <div class="post_item">
      <a href="http://habrahabr.ru/users/TheMengzor/" class="user_name">TheMengzor</a> &rarr;
      <a href="http://habrahabr.ru/qa/22343/#answer_91584" class="post_name">Можно ли управлять музыкой ВКонтакте с помощью маковских мультимедийных кнопок?</a>&nbsp;<span class="count">3</span>
    </div>

    <div class="post_item">
      <a href="http://habrahabr.ru/users/lsoul/" class="user_name">lsoul</a> &rarr;
      <a href="http://habrahabr.ru/qa/22365/#comment_107860" class="post_name">Есть ли смысл сотрудничать с государством(политиками)?</a>&nbsp;<span class="count">2</span>
    </div>

    <div class="post_item">
      <a href="http://habrahabr.ru/users/lolhunter/" class="user_name">lolhunter</a> &rarr;
      <a href="http://habrahabr.ru/qa/22355/#answer_91582" class="post_name">Курсовая разница при получение валюты</a>&nbsp;<span class="count">2</span>
    </div>

  </div>
  <div class="all">&laquo; <a href="/qa/">все вопросы</a></div>
  
</div>

		

		

		


<div class="block similar_events">
  <div class="title">Ближайшие события</div>
  <div class="events_items">
    
    <div class="event_item">
			
			<div class="date">
				<div class="dayname dayname_1"></div>
				<div class="day">06</div>
				<div class="month">авг</div>				
			</div>
			
			<div class="title">
			 <a href="/events/494/">Российская лентняя школа по информационному поиску</a>			 
			</div>
		</div>
		
    <div class="event_item">
			
			<div class="date">
				<div class="dayname dayname_2"></div>
				<div class="day">07</div>
				<div class="month">авг</div>				
			</div>
			
			<div class="title">
			 <a href="/events/891/">Управление блокировками учетных записей в корпоративной среде</a>			 
			</div>
		</div>
		
    <div class="event_item">
			
			<div class="date">
				<div class="dayname dayname_3"></div>
				<div class="day">08</div>
				<div class="month">авг</div>				
			</div>
			
			<div class="title">
			 <a href="/events/853/">Управление репутацией в интернете.</a>			 
			</div>
		</div>
		
    <div class="event_item">
			
			<div class="date">
				<div class="dayname dayname_6"></div>
				<div class="day">11</div>
				<div class="month">авг</div>				
			</div>
			
			<div class="title">
			 <a href="/events/869/">Форум «Спасибо, Кэп!» в Одессе</a>			 
			</div>
		</div>
		
    <div class="event_item">
			
			<div class="date">
				<div class="dayname dayname_6"></div>
				<div class="day">11</div>
				<div class="month">авг</div>				
			</div>
			
			<div class="title">
			 <a href="/events/872/">Мастер-класс по итогам конкурса «Большой ку$h» (PHDays 2012)</a>			 
			</div>
		</div>
		
  </div>
  <div class="all">&laquo; <a href="/events/">все события</a></div>
</div>


		
<iframe src="//www.facebook.com/plugins/likebox.php?href=http%3A%2F%2Fwww.facebook.com%2Fhabrahabr.ru&amp;width=292&amp;height=258&amp;colorscheme=light&amp;show_faces=true&amp;border_color&amp;stream=false&amp;header=false&amp;appId=437464306275519" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:292px; height:258px;" allowTransparency="true"></iframe>

	
  </div>
  <div class="clear"></div>

			
	
	
	<div class="rotated_posts">
		
			<div class="rotated_post ">
				<a href="http://habrahabr.ru/post/141093/" class="grey">Насколько большие массивы (и значения) в PHP? (Подсказка: ОЧЕНЬ БОЛЬШИЕ)</a>
			</div>
		
			<div class="rotated_post ">
				<a href="http://habrahabr.ru/post/141789/" class="grey">Простой и приятный видеоролик о Linux</a>
			</div>
		
			<div class="rotated_post last">
				<a href="http://habrahabr.ru/post/139783/" class="grey">Как положить спасибо в карман</a>
			</div>
		
	</div>
	

		  <div id="footer">
      
			
			<dl>
				<dd><a href="http://habrahabr.ru/login/">Войти</a></dd>
				<dd><a href="http://habrahabr.ru/register/">Регистрация</a></dd>
			</dl>
			
			<dl>
				<dt>Разделы</dt>

				<dd><a href="http://habrahabr.ru/qa/">Q&A</a></dd>
				<dd><a href="http://habrahabr.ru/hubs/">Хабы</a></dd>
				<dd><a href="http://habrahabr.ru/events/">События</a></dd>
				<dd><a href="http://habrahabr.ru/companies/">Компании</a></dd>
				<dd><a href="http://habrahabr.ru/job/">Работа</a></dd>
				<dd><a href="http://habrahabr.ru/people/">Люди</a></dd>
			</dl>
			<dl>
				<dt>Посты</dt>
				
				<dd><a href="http://habrahabr.ru/posts/top/">Лучшие</a></dd>
				<dd><a href="http://habrahabr.ru/posts/collective/">Тематические</a></dd>
				<dd><a href="http://habrahabr.ru/posts/corporative/">Корпоративные</a></dd>
				<dd><a href="http://habrahabr.ru/sandbox/">Песочница</a></dd>
			</dl>
			<dl>
				<dt>Инфо</dt>
				<dd><a href="http://habrahabr.ru/info/about/">О сайте</a></dd>
				<dd><a href="http://habrahabr.ru/info/help/rules/">Правила</a></dd>
				<dd><a href="http://habrahabr.ru/info/help/">Помощь</a></dd>
				<dd><a href="http://habrahabr.ru/info/agreement/">Соглашение</a></dd>
				<dd><a href="http://habrahabr.ru/info/stats/">Статистика</a></dd>
			</dl>
			<dl>
				<dt>Услуги</dt>
				<dd><a href="http://habrahabr.ru/info/advertising/">Реклама</a></dd>
				<dd><a href="http://habrahabr.ru/info/advertising/corporate/">Корпоративные пакеты</a></dd>
				<dd><a href="http://habrahabr.ru/info/advertising/workshops/">Семинары</a></dd>
			</dl>
      <div class="copyright">
    		<a class="footer_logo" href="http://thematicmedia.ru/">Тематические Медиа</a>
    		<div class="about">
    			© 2006&#8211;2012<br>
    			«<a href="http://www.thematicmedia.ru/">Тематические Медиа</a>»
    		  <br><br>
  				Служба поддержки:<br>
  				<a href="mailto:support@habrahabr.ru" title="адрес службы поддержки пользователей">support@habrahabr.ru</a><br><br><br>
  				<a href="http://m.habrahabr.ru">Мобильная версия</a>

			  </div>
      </div>

</div>
		</div>
	 	
		
    
		
		
    <script type="text/javascript">
      $(document).ready(function(){
        // test gggg
        // настройки всплывающих уведомлений
        $.jGrowl.defaults.closerTemplate = '<div>Закрыть все уведомления</div>';         
        
        // настройки тултипов
        $(".help-tip").tipTip({maxWidth: "300px", edgeOffset: 10});  
        
      });
      // global vars
      var g_base_url = 'habrahabr.ru';
      var g_show_xpanel = false;
      var g_base_fullurl = 'http://habrahabr.ru/';
      var g_is_guest = false;
       
    </script>
		
    <script type="text/javascript" src="/javascripts/1343992692/_parts/shortcuts.js"></script>
		<script type="text/javascript" src="/javascripts/1343992692/_parts/to_top.js"></script>
		<link href="/styles/1343992692/_parts/_to_top.css" rel="stylesheet" media="all" />
		
<script type="text/javascript">
	/*<![CDATA[*/
	var ga = document.createElement('script');
		ga.setAttribute('async', 'true');
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	/* ]]>*/
</script>

<script type="text/javascript">
	var _gaq = _gaq || [];
	_gaq.push(
	    ['_setAccount', 'UA-726094-1'],
	    ['_setDomainName', '.habrahabr.ru'],
	    ["_addOrganic", "mail.ru", "q"],
	    ["_addOrganic","rambler.ru", "words"],
	    ["_addOrganic","nigma.ru", "s"],
	    ["_addOrganic","blogs.yandex.ru", "text"],
	    ["_addOrganic","webalta.ru", "q"],
	    ["_addOrganic","aport.ru", "r"],
	    ["_addOrganic","akavita.by", "z"],
	    ["_addOrganic","meta.ua", "q"],
	    ["_addOrganic","bigmir.net", "q"],
	    ["_addOrganic","tut.by", "query"],
	    ["_addOrganic","all.by", "query"],
	    ["_addOrganic","i.ua", "q"],
	    ["_addOrganic","online.ua", "q"],
	    ["_addOrganic","a.ua", "s"],
	    ["_addOrganic","ukr.net", "search_query"],
	    ["_addOrganic","search.com.ua", "q"],
	    ["_addOrganic","search.ua", "query"],
	    ["_addOrganic","poisk.ru", "text"],
	    ["_addOrganic","km.ru", "sq"],
	    ["_addOrganic","liveinternet.ru", "ask"],
	    ["_addOrganic","gogo.ru", "q"],
	    ["_addOrganic","gde.ru", "keywords"],
	    ["_addOrganic","quintura.ru", "request"],
	    ['_trackPageview']
	);
	document.documentElement.firstChild.appendChild(ga);
</script>	
		
		
	</body>
</html>
